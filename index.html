<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>thoughts</title>
  <style>
    :root {
      --dur: 320ms;
      --bg: #0e0e0e;
      --panel: #0c0c0c;
      --btn: #1a1a1a;
      --border: #000000;
      --text: #ffffff;
      --shadow: rgba(92,92,92,0.1);
    }

    /* Base */
    body {
      margin: 0;
      font-family: Georgia, serif;
      background: var(--bg);
      color: var(--text);
    }

    /* Floating 4-line menu button */
    .menu-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      width: 44px;
      height: 44px;
      border: 1px solid var(--border);
      background: var(--btn);
      color: var(--text);
      border-radius: 10px;
      cursor: pointer;
      z-index: 1100;
    }
    .menu-btn .bar { position: absolute; left: 9px; right: 9px; height: 2px; background: #fff; border-radius: 2px; transition: transform var(--dur) ease, opacity var(--dur) ease, top var(--dur) ease; }
    .menu-btn .b1 { top: 12px; }
    .menu-btn .b2 { top: 18px; }
    .menu-btn .b3 { top: 24px; }
    .menu-btn .b4 { top: 30px; }
    body.menu-open .menu-btn .b1 { top: 21px; transform: rotate(45deg); }
    body.menu-open .menu-btn .b4 { top: 21px; transform: rotate(-45deg); }
    body.menu-open .menu-btn .b2,
    body.menu-open .menu-btn .b3 { opacity: 0; transform: translateX(6px); }

    /* Scrim and background blur */
    .scrim { position: fixed; inset: 0; background: rgba(0,0,0,.45); opacity: 0; pointer-events: none; transition: opacity var(--dur) ease; z-index: 1000; }
    body.menu-open .scrim { opacity: 1; pointer-events: auto; }

    .container { min-height: 100vh; display: grid; }
    .content { padding: 40px; display: flex; justify-content: center; align-items: flex-start; transition: filter var(--dur) ease; }
    body.menu-open .content { filter: blur(15px) brightness(.9); }
    body.menu-open { overflow: hidden; }

    pre { white-space: pre-wrap; word-break: break-word; background: var(--panel); padding: 30px; font-size: 18px; line-height: 1.6; max-width: 700px; width: 100%; box-shadow: 0 0 10px rgba(24,24,24,0.05); border: none; }

    /* Centered menu overlay */
    .center-menu { position: fixed; inset: 0; display: grid; place-items: center; opacity: 0; pointer-events: none; transition: opacity var(--dur) ease; z-index: 1050; overflow: hidden; }
    body.menu-open .center-menu { opacity: 1; pointer-events: auto; }
    body.menu-open .center-menu { opacity: 1; pointer-events: auto; }

    .center-list { list-style: none; padding: 0; margin: 0; text-align: center; }
    .center-list li { margin: 10px 0; opacity: 0; transform: translateY(10px); }
    body.menu-open .center-list li { opacity: 1; transform: translateY(0); transition: transform 420ms cubic-bezier(.2,.8,.2,1), opacity 420ms linear; transition-delay: calc(var(--i) * 60ms); }

    .center-list a { display: inline-block; text-decoration: none; color: #fff; font-size: 22px; padding: 8px 16px; border-radius: 12px; transition: filter 180ms ease, text-shadow 180ms ease, transform 180ms ease; }
    .center-list a:hover, .center-list a:focus-visible { text-shadow: 0 0 12px rgba(255,255,255,.65); transform: translateY(-1px); }

    /* Gentle exit when picking a subject */
    body.menu-closing .center-list li { opacity: 0; transform: translateY(-6px); transition: transform 240ms ease, opacity 240ms ease; }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce) { * { transition: none !important; animation: none !important; } }
  .center-wrap { max-height: min(78vh, 720px); overflow-y: auto; padding: 8px 12px; overscroll-behavior: contain; -webkit-overflow-scrolling: touch; scrollbar-gutter: stable both-edges; scrollbar-width: thin; }
    .center-wrap::-webkit-scrollbar { width: 10px; }
    .center-wrap::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 6px; }
    .center-wrap::-webkit-scrollbar-track { background: transparent; }
  </style>
</head>
<body>
  <button id="menuBtn" class="menu-btn" aria-expanded="false" aria-controls="centerMenu" aria-label="Open menu"><span class="bar b1"></span><span class="bar b2"></span><span class="bar b3"></span><span class="bar b4"></span></button>
  <div class="scrim" id="scrim" aria-hidden="true"></div>
  <div id="centerMenu" class="center-menu" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="center-wrap">
      <ul id="essayList" class="center-list" aria-label="Subjects">
        <li style="--i:0"><a href="?file=10.12.2025.txt">10.12.2025 - 4 AM courage</a></li>
        <li style="--i:0"><a href="?file=basics.txt">basics</a></li>
        <li style="--i:0"><a href="?file=choice.txt">choice</a></li>
        <li style="--i:0"><a href="?file=calm.txt">calm</a></li>
        <li style="--i:1"><a href="?file=algorithm.txt">algorithm</a></li>
        <li style="--i:1"><a href="?file=patterns.txt">patterns</a></li>
        <li style="--i:2"><a href="?file=long-term.txt">long term thinking</a></li>
        <li style="--i:3"><a href="?file=self-sufficient.txt">self-sufficiency</a></li>
        <li style="--i:4"><a href="?file=task.txt">task</a></li>
        <li style="--i:5"><a href="?file=work.txt">work</a></li>
        <li style="--i:6"><a href="?file=adaptability.txt">adaptability</a></li>
        <li style="--i:7"><a href="?file=no.txt">no</a></li>
      </ul>
    </div>
  </div>

  <div class="container">
    <main class="content">
      <pre id="content"> <= </pre>
    </main>
  </div>

  <script>
    const body = document.body;
    const menuBtn = document.getElementById('menuBtn');
    const scrim = document.getElementById('scrim');
    const centerMenu = document.getElementById('centerMenu');
    const essayList = document.getElementById('essayList');
    const contentBox = document.getElementById('content');

    function openMenu() {
      body.classList.add('menu-open');
      menuBtn.setAttribute('aria-expanded','true');
      centerMenu.setAttribute('aria-hidden','false');
    }
    function closeMenuImmediate() {
      body.classList.remove('menu-open','menu-closing');
      menuBtn.setAttribute('aria-expanded','false');
      centerMenu.setAttribute('aria-hidden','true');
    }

    menuBtn.addEventListener('click', () => {
      if (body.classList.contains('menu-open')) closeMenuImmediate(); else openMenu();
    });
    scrim.addEventListener('click', closeMenuImmediate);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenuImmediate(); });

    function getParamFile() {
      const params = new URLSearchParams(window.location.search);
      const p = params.get('file');
      return p ? (p.startsWith('essays/') ? p : 'essays/' + p) : null;
    }

    async function loadFile(file) {
      try {
        const res = await fetch(file);
        if (!res.ok) throw new Error('Fetch error');
        const text = await res.text();
        contentBox.textContent = text;
      } catch (e) {
        contentBox.textContent = 'Error loading file.';
      }
    }

    essayList.addEventListener('click', (e) => {
      const a = e.target.closest('a');
      if (!a) return;
      e.preventDefault();
      const url = new URL(a.getAttribute('href'), window.location.href);
      const fileParam = url.searchParams.get('file');
      if (fileParam) {
        const file = fileParam.startsWith('essays/') ? fileParam : 'essays/' + fileParam;
        history.pushState({ file: fileParam }, '', `?file=${encodeURIComponent(fileParam)}`);
        loadFile(file);
      }
      // gentle disappear
      body.classList.add('menu-closing');
      setTimeout(() => { closeMenuImmediate(); }, 260);
    });

    window.addEventListener('popstate', () => {
      const file = getParamFile();
      if (file) loadFile(file);
    });

    // Initial load
    (function init() {
      const file = getParamFile();
      if (file) loadFile(file);
    })();
  </script>
</body>
</html>
